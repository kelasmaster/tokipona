<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Toki Pona Symbol Viewer</title>
  <style>
    :root {
      --bg: #111;
      --text: #eee;
      --card-bg: #222;
      --shadow: #00ccff;
    }
    body.light {
      --bg: #fefefe;
      --text: #111;
      --card-bg: #fff;
      --shadow: #888;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: sans-serif;
      text-align: center;
      padding: 2rem;
      transition: background 0.3s, color 0.3s;
    }
    input, textarea {
      font-size: 1.2rem;
      padding: 0.6rem;
      border-radius: 8px;
      border: none;
      background-color: var(--card-bg);
      color: var(--text);
      margin-bottom: 1rem;
      width: 90%;
      max-width: 500px;
    }
    .toggle-btn {
      background-color: var(--card-bg);
      color: var(--text);
      border: 1px solid #555;
      padding: 0.5rem 1rem;
      margin: 0.2rem;
      border-radius: 8px;
      cursor: pointer;
    }

    #symbol {
      margin-top: 2rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    .symbol-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .symbol-container img {
      width: 80px;
      height: 80px;
      background: var(--card-bg);
      border-radius: 10px;
      box-shadow: 0 0 3px var(--shadow);
      object-fit: contain;
    }
    .word-label, .translation {
      font-size: 0.9rem;
      margin-top: 0.3rem;
      color: var(--text);
    }

    footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: gray;
    }
  </style>
</head>
<body class="dark">

  <h1>üåê Toki Pona Symbol Viewer</h1>

  <textarea id="wordInput" rows="2" oninput="showSymbols()" placeholder="Enter Toki Pona or English/Indonesian words"></textarea><br>

  <button class="toggle-btn" onclick="toggleLang()">Translate: EN / ID</button>
  <button class="toggle-btn" onclick="toggleSymbolOnly()">Symbol Only</button>
  <button class="toggle-btn" onclick="toggleSymbolStyle()">Switch Style: Sitelen Pona / Sitelen Sitelen</button>
  <button class="toggle-btn" onclick="toggleDarkMode()">Toggle Dark Mode</button>

  <div id="symbol"></div>

  <footer>
    Created by Wahyudi ¬© <span id="year"></span>
  </footer>

  <script>
    const dictionary = {
      "jan": ["person, human", "orang, manusia"],
      "telo": ["water, liquid", "air, cairan"],
      "suno": ["sun, light", "matahari, cahaya"],
      "kili": ["fruit, vegetable", "buah, sayur"],
      "pipi": ["bug, insect", "serangga"],
      "suli": ["big, tall", "besar, tinggi"],
      "lili": ["small, little", "kecil"],
      // Tambahkan lebih banyak kosakata di sini
    };

    const reverseDictionary = {};
    for (const [key, [en, id]] of Object.entries(dictionary)) {
      en.split(/,\s*/).forEach(w => reverseDictionary[w.toLowerCase()] = key);
      id.split(/,\s*/).forEach(w => reverseDictionary[w.toLowerCase()] = key);
    }

    let lang = 0;
    let symbolOnly = false;
    let symbolStyle = 'pona'; // or 'sitelen'
    let isDark = true;

    function showSymbols() {
      const input = document.getElementById("wordInput").value.trim().toLowerCase();
      const words = input.split(/\s+/);
      const symbolDiv = document.getElementById("symbol");
      symbolDiv.innerHTML = "";

      words.forEach(word => {
        let tokiWord = dictionary[word] ? word : reverseDictionary[word];

        const container = document.createElement("div");
        container.className = "symbol-container";

        if (!tokiWord) {
          container.innerHTML = `<div style="color:#f55;">‚ùå Not found: "${word}"</div>`;
          symbolDiv.appendChild(container);
          return;
        }

        const img = document.createElement("img");
        if (symbolStyle === "pona") {
          img.src = `https://sitelen.nimi.li/img/${tokiWord}.png`;
        } else {
          img.src = `https://nimi.li/internal/api/ss?word=${tokiWord}`;
        }
        img.alt = tokiWord;
        img.onerror = () => { img.src = "https://via.placeholder.com/80x80?text=?"; };
        container.appendChild(img);

        const label = document.createElement("div");
        label.className = "word-label";
        label.textContent = tokiWord;

        const trans = document.createElement("div");
        trans.className = "translation";
        trans.textContent = dictionary[tokiWord]?.[lang] || "(no translation)";

        if (!symbolOnly) {
          container.appendChild(label);
          container.appendChild(trans);
        }

        symbolDiv.appendChild(container);
      });
    }

    function toggleLang() {
      lang = 1 - lang;
      showSymbols();
    }

    function toggleSymbolOnly() {
      symbolOnly = !symbolOnly;
      showSymbols();
    }

    function toggleSymbolStyle() {
      symbolStyle = (symbolStyle === 'pona') ? 'sitelen' : 'pona';
      showSymbols();
    }

    function toggleDarkMode() {
      isDark = !isDark;
      document.body.className = isDark ? "dark" : "light";
    }

    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

</body>
</html>
